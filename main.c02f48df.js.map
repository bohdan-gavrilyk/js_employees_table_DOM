{"version":3,"sources":["scripts/main.js"],"names":["oldParent","tableHead","document","querySelector","tableRow","table","employeeForm","createElement","sortTable","arr","index","sortArr","sort","a","b","copyA","cells","innerHTML","copyB","slice","split","join","localeCompare","classList","add","body","append","addEventListener","e","sorted","rows","target","cellIndex","arrValid","tBodies","children","every","el","i","reverse","remove","removeAttribute","parentElement","form","formValidate","data","test","get","length","pushNotification","title","description","type","posTop","posRight","notification","header","paragraph","value","setAttribute","style","top","right","textContent","fontSize","setTimeout","preventDefault","FormData","newTableRow","insertRow","count","set","Number","toLocaleString","forEach","insertCell","innerText","reset","indexCell","elements","cloneNode","cell","eventState","replaceWith","focus","option","replaceAll","ev","textInput","code","name"],"mappings":"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","file":"main.c02f48df.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst tableHead = document.querySelector('thead');\nconst tableRow = document.querySelector('tbody');\nconst table = document.querySelector('table');\nconst employeeForm = document.createElement('form');\n\nemployeeForm.classList.add('new-employee-form');\n\nemployeeForm.innerHTML = `\n    <label>Name:\n      <input type=\"text\" name=\"name\" data-qa=\"name\">\n    </label>\n    <label>Position:\n      <input type=\"text\" name=\"position\" data-qa=\"position\">\n    </label>\n    <label>Office:\n      <select name=\"office\" data-qa=\"office\">\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    </label>\n    <label>Age:\n      <input type=\"number\" name=\"age\" data-qa=\"age\">\n    </label>\n    <label>Salary:\n      <input type=\"number\" name=\"salary\" data-qa=\"salary\">\n    </label>\n    <button type=\"submit\">Save to table</button>\n`;\n\ndocument.body.append(employeeForm);\n\ntableHead.addEventListener('click', e => {\n  const tableValue = [...tableRow.rows];\n  const index = e.target.cellIndex;\n  const sorted = sortTable(tableValue, index);\n  const arrValid = [...table.tBodies[0].children].every((el, i) => {\n    return sorted[i].innerHTML === el.innerHTML;\n  });\n\n  if (arrValid) {\n    sorted.reverse();\n    table.tBodies[0].append(...sorted);\n\n    return;\n  }\n  table.tBodies[0].append(...sorted);\n});\n\nfunction sortTable(arr, index) {\n  const sortArr = arr.sort((a, b) => {\n    let copyA = a.cells[index].innerHTML;\n    let copyB = b.cells[index].innerHTML;\n\n    if (copyA[0] === '$') {\n      copyA = +copyA.slice(1).split(',').join('');\n      copyB = +copyB.slice(1).split(',').join('');\n\n      return copyA - copyB;\n    }\n\n    if (+copyA) {\n      return copyA - copyB;\n    }\n\n    return copyA.localeCompare(copyB);\n  });\n\n  return sortArr;\n}\n\nlet oldParent;\n\ntableRow.addEventListener('click', (e) => {\n  if (oldParent) {\n    oldParent.classList.remove('active');\n    oldParent.removeAttribute('class');\n  }\n  oldParent = e.target.parentElement;\n  e.target.parentElement.classList.add('active');\n});\n\nconst form = document.querySelector('form');\n\nfunction formValidate(data) {\n  if (/[^a-z]/gi.test(data.get('name')) || data.get('name').length < 4) {\n    pushNotification(\n      'Name is not correct',\n      'Your name must have at least 4 letters and must not include numbers',\n      'error',\n    );\n\n    return false;\n  }\n\n  if (/[^a-z| ]/gi.test(data.get('position')) || data.get('position') === '') {\n    pushNotification(\n      'Position is not correct',\n      'Position must not be empty and must not include numbers',\n      'error',\n    );\n\n    return false;\n  }\n\n  if (data.get('age') < 18 || data.get('age') > 90) {\n    pushNotification(\n      'Age is not correct',\n      'Your age cannot be less than 18 and more than 90',\n      'error',\n    );\n\n    return false;\n  }\n\n  if (data.get('salary') === '' || data.get('salary') <= 0) {\n    pushNotification(\n      'Salary is not correct',\n      'Salary must be greater than 0',\n      'error',\n    );\n\n    return false;\n  }\n\n  return true;\n}\n\nconst pushNotification = (title, description, type,\n  posTop = 450, posRight = 280) => {\n  const notification = document.createElement('div');\n  const header = document.createElement('h2');\n  const paragraph = document.createElement('p');\n\n  notification.classList.value = `notification ${type}`;\n  notification.setAttribute('data-qa', 'notification');\n  notification.style.top = `${posTop}px`;\n  notification.style.right = `${posRight}px`;\n\n  notification.append(header);\n  notification.append(paragraph);\n\n  header.textContent = title;\n  header.classList.add('title');\n  header.style.fontSize = '18px';\n\n  paragraph.textContent = description;\n  document.body.append(notification);\n  setTimeout(() => notification.remove(), 3000);\n};\n\nform.addEventListener('submit', (e) => {\n  e.preventDefault();\n\n  const data = new FormData(form);\n\n  if (formValidate(data)) {\n    const newTableRow = tableRow.insertRow();\n    let count = 0;\n\n    data.set('salary', `$${Number(data.get('salary'))\n      .toLocaleString('en-US')}`);\n\n    data.forEach((el) => {\n      newTableRow.insertCell(count).innerText = el;\n      count++;\n    });\n    form.reset();\n\n    pushNotification(\n      'Validation success',\n      'Employee was successfully added',\n      'success',\n    );\n  }\n});\n\ntableRow.addEventListener('dblclick', (e) => {\n  if (e.target.children.length > 0) {\n    return;\n  }\n\n  const indexCell = e.target.cellIndex;\n  let value = e.target.parentElement.cells[e.target.cellIndex].innerHTML;\n  const createElement = form.elements[e.target.cellIndex].cloneNode(true);\n  const cell = document.createElement('td');\n  let eventState = false;\n\n  cell.append(createElement);\n  e.target.parentElement.cells[e.target.cellIndex].replaceWith(cell);\n  createElement.focus();\n\n  if (indexCell === 2) {\n    for (const option of createElement.children) {\n      if (option.value === value) {\n        option.setAttribute('selected', '');\n      }\n    }\n  }\n\n  if (indexCell === 4) {\n    value = value.slice(1).replaceAll(',', '');\n  }\n\n  createElement.setAttribute('value', value);\n\n  createElement.addEventListener('keydown', (ev) => {\n    const textInput = createElement.value;\n\n    if (ev.code === 'Enter') {\n      eventState = true;\n\n      if (textInput.length === 0) {\n        createElement.remove();\n        cell.textContent = value;\n\n        return;\n      }\n\n      switch (createElement.name) {\n        case 'name':\n          if (/[^a-z| ]/gi.test(textInput) || textInput.length < 4) {\n            pushNotification(\n              'Name is not correct',\n              'Your name must have at least 4 '\n              + 'letters and must not include numbers',\n              'error',\n            );\n            break;\n          }\n          createElement.remove();\n          cell.textContent = textInput;\n          break;\n\n        case 'position':\n          if (/[^a-z| ]/gi.test(textInput)) {\n            pushNotification(\n              'Position is not correct',\n              'Position must not be empty and must not include numbers',\n              'error',\n            );\n            break;\n          }\n          createElement.remove();\n          cell.textContent = textInput;\n          break;\n        case 'office':\n          createElement.remove();\n          cell.textContent = textInput;\n          break;\n\n        case 'age':\n          if (textInput < 18 || textInput > 90) {\n            pushNotification(\n              'Age is not correct',\n              'Your age cannot be less than 18 and more than 90',\n              'error',\n            );\n            break;\n          }\n          createElement.remove();\n          cell.textContent = textInput;\n          break;\n\n        case 'salary':\n          if (textInput <= 0) {\n            pushNotification(\n              'Salary is not correct',\n              'Salary must be greater than 0',\n              'error',\n            );\n            break;\n          }\n          createElement.remove();\n          cell.textContent = `$${Number(textInput).toLocaleString('en-US')}`;\n          break;\n      }\n    }\n  });\n\n  createElement.addEventListener('blur', () => {\n    if (eventState) {\n      return;\n    }\n    createElement.remove();\n    cell.textContent = createElement.value;\n  });\n});\n"]}